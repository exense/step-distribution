{
	"NAME": "Step OSS distribution",
	"OS": "LINUX",
	"LOCK": "STEP",

	"ACTIONS": [
		{
			"ACTION": "COMPILE",
			"TYPE": "POM",
			"FOLDER": "step-distribution/",
			"PARAMETERS": [
				{
					"NAME": "DEVELOPMENT",
					"URL": "nexus-staging::https://nexus-enterprise.exense.ch/repository/staging-maven/",
					"CONFIG": "DefaultBuild"
				},
				{
					"NAME": "PRODUCTION",
					"URL": "nexus-staging::https://nexus-enterprise.exense.ch/repository/staging-maven/",
					"CONFIG": "DefaultBuild"
				}
			]
		},
		{
			"ACTION": "PUSH",
			"ACTIONS": [
				{
					"TYPE": "GITHUB",
					"ACTIONS": [
						{
							"ORIGIN": "step-distribution/step-distribution-controller/target/step-controller-${VERSION}.zip",
							"DESTINATION": "step-controller-${VERSION}.zip"
						},
						{
							"ORIGIN": "step-distribution/step-distribution-agent/target/step-agent-${VERSION}.zip",
							"DESTINATION": "step-agent-${VERSION}.zip"
						},
						{
							"ORIGIN": "step-distribution/step-distribution-ide/target/step-ide-${VERSION}.zip",
							"DESTINATION": "step-ide-${VERSION}.zip"
						}
					]
				},
				{
					"TYPE": "FTP",
					"ACTIONS": [
						{
							"ORIGIN": "step-distribution/step-distribution-controller/target/step-controller-${VERSION}.zip",
							"DESTINATION": "step/${VERSION}/step-controller-${VERSION}.zip"
						},
						{
							"ORIGIN": "step-distribution/step-distribution-agent/target/step-agent-${VERSION}.zip",
							"DESTINATION": "step/${VERSION}/step-agent-${VERSION}.zip"
						},
						{
							"ORIGIN": "step-distribution/step-distribution-ide/target/step-ide-${VERSION}.zip",
							"DESTINATION": "step/${VERSION}/step-ide-${VERSION}.zip"
						}
					]
				},
				{
					"TYPE": "DOCKER",
					"OS": "LINUX",
					"PARAMETERS": [
						{
							"NAME": "DEVELOPMENT",
							"URL": "docker-dev.exense.ch"
						},
						{
							"NAME": "PRODUCTION",
							"URL": "docker.exense.ch"
						}
					],
					"ACTIONS": [
						{
							"ORIGIN": "step-distribution/step-distribution-controller/target/step-controller-${VERSION}.zip",
							"DESTINATION": "step:k8s-step-controller-${VERSION}-java-11",
							"CONFIG": "controller-dockerfile"
						},
						{
							"ORIGIN": "step-distribution/step-distribution-agent/target/step-agent-${VERSION}.zip",
							"DESTINATION": "step:k8s-step-agent-${VERSION}-java-11",
							"CONFIG": "agent-dockerfile"
						}
					]
				}
			]
		}
	]
}